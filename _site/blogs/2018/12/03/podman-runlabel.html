<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="podman.io" />

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Simplifying Podman commands with labels | podman.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Simplifying Podman commands with labels" />
<meta name="author" content="baude" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Simplifying Podman commands with labels By Brent Baude GitHub Twitter Commands used by container runtimes to create containers have become complex. It is on purpose of course. When creating containers, we want the ability to specify various security or network attributes. But if you are in the unenviable position to have to keystroke in some of these lengthy commands, it can grow tiresome. Defining labels on the container image is a great way to define how the container should be run; however, now with Podman we can read and execute that label saving you potential command line bloat." />
<meta property="og:description" content="Simplifying Podman commands with labels By Brent Baude GitHub Twitter Commands used by container runtimes to create containers have become complex. It is on purpose of course. When creating containers, we want the ability to specify various security or network attributes. But if you are in the unenviable position to have to keystroke in some of these lengthy commands, it can grow tiresome. Defining labels on the container image is a great way to define how the container should be run; however, now with Podman we can read and execute that label saving you potential command line bloat." />
<link rel="canonical" href="http://0.0.0.0:4000/blogs/2018/12/03/podman-runlabel.html" />
<meta property="og:url" content="http://0.0.0.0:4000/blogs/2018/12/03/podman-runlabel.html" />
<meta property="og:site_name" content="podman.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-03T00:00:00-06:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"baude"},"description":"Simplifying Podman commands with labels By Brent Baude GitHub Twitter Commands used by container runtimes to create containers have become complex. It is on purpose of course. When creating containers, we want the ability to specify various security or network attributes. But if you are in the unenviable position to have to keystroke in some of these lengthy commands, it can grow tiresome. Defining labels on the container image is a great way to define how the container should be run; however, now with Podman we can read and execute that label saving you potential command line bloat.","@type":"BlogPosting","url":"http://0.0.0.0:4000/blogs/2018/12/03/podman-runlabel.html","headline":"Simplifying Podman commands with labels","dateModified":"2018-12-03T00:00:00-06:00","datePublished":"2018-12-03T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/blogs/2018/12/03/podman-runlabel.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/assets/css/style.css?v=a5ad4b5b78f492f24c1321a74efdbcc0f20fd4cd">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="">Podman</a></h1>
        <p class="header">Manage pods, containers, and container images.</p>

        <ul>
          <li><a class="buttons" href="/getting-started">Get Started</a>
          <li><a class="buttons" href="/community">Join Community</a>
          <li><a class="buttons" href="/blogs">Blog</a>
          <li><a class="buttons" href="/releases">Releases</a>
          <li><a class="buttons" href="/talks">Talks</a>
          <li><a class="buttons github" href="https://github.com/containers/libpod">View Code</a>
          <li><a class="buttons github" href="https://github.com/jberkus/podman.io">Edit Website</a>
        </ul>

        
          <p class="header">This project is maintained by the <a class="header name" href="https://github.com/jberkus">jberkus</a> organization.</p>

        <p class="header">Subscribe to the <a href="https://podman.io/feed.xml">blog feed</a>.</p>
        

        
      </header>

      <section>
        <p><img src="https://podman.io/images/podman.svg" alt="podman logo" /></p>

<h1 id="simplifying-podman-commands-with-labels">Simplifying Podman commands with labels</h1>
<h2 id="by-brent-baude-github-twitter">By Brent Baude <a href="https://github.com/baude">GitHub</a> <a href="https://twitter.com/bbaude">Twitter</a></h2>

<p>Commands used by container runtimes to create containers have become complex.  It is on purpose of course.  When creating
containers, we want the ability to specify various security or network attributes. But if you are in the unenviable position to have to keystroke in some of these lengthy commands, it can grow tiresome.  Defining labels on the container image is a great way to define how the container should be run; however, now with Podman we can read and execute that label saving you potential command line bloat.</p>

<!--readmore-->

<h3 id="container-image-labels">Container image Labels</h3>
<p>Container images have had the concept of a label for quite some time. They are often used as identifiers for the image; i.e. version, release, author, etc. But you can create a container label for just about anything.  With the Atomic CLI project, we used to leverage labels such as RUN, INSTALL, and UNINSTALL.  These labels we defined for the purpose of their verbiage.</p>

<h3 id="podman-container-runlabel">Podman container runlabel</h3>
<p>To mimic the Atomic CLI project, we added a sub-command called <code class="highlighter-rouge">podman container runlabel</code>. This command will execute the contents of a given label as defined by the container image.</p>

<p>Lets consider an example.  I have a simple container image based on mariab that I use for my Podman development.  The image is made like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM docker.io/library/mariadb:latest
LABEL RUN="podman run --name some-mariadb -P -e MYSQL_ROOT_PASSWORD=x -dt IMAGE"
RUN echo "bind-address = 0.0.0.0" &gt;&gt; /etc/mysql/my.cnf
</code></pre></div></div>

<p>Note the definition of the RUN label in the image.  It contains the complete command line description of how to run it.  The use of IMAGE here is a placeholder is automatically substituted by Podman to the real image name. On my system, this image exists as <code class="highlighter-rouge">quay.io/baude/demodb:latest</code>.</p>

<p>We can get a preview of what Podman would run using the <code class="highlighter-rouge">--display</code> switch.  In the case of my mariab image, a dry-run would show something like this:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman container runlabel --display run quay.io/baude/demodb:latest
Command: /proc/self/exe run --name some-mariadb -P -e MYSQL_ROOT_PASSWORD=x -dt quay.io/baude/demodb:latest
</code></pre></div></div>
<p>Note how the IMAGE was translated into the image name.  If we rerun the previous command and subtract the <code class="highlighter-rouge">--display</code> option, podman will create the container exactly as described by the run label.</p>

<p>So, next time you create your own image, do yourself a favor and construct labels that Podman can read and simplify your life.</p>

      </section>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
