<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="podman.io" />

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Podman container image exists | podman.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Podman container image exists" />
<meta name="author" content="baude" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Podman container|image exists By Brent Baude GitHub Twitter We are seeing a proliferation of Podman usage in users’ daily workflows. As such, these workflows are often scripted – in something like bash – and clear exit codes from the applications being run are paramount. One of the tasks we often see is a user wanting to verify if an image or a container exists in local storage. We saw several different approaches approaches to solving this including running podman ps or podman images with filters or complex uses of grep." />
<meta property="og:description" content="Podman container|image exists By Brent Baude GitHub Twitter We are seeing a proliferation of Podman usage in users’ daily workflows. As such, these workflows are often scripted – in something like bash – and clear exit codes from the applications being run are paramount. One of the tasks we often see is a user wanting to verify if an image or a container exists in local storage. We saw several different approaches approaches to solving this including running podman ps or podman images with filters or complex uses of grep." />
<link rel="canonical" href="http://0.0.0.0:4000/blogs/2018/11/27/podman-exists.html" />
<meta property="og:url" content="http://0.0.0.0:4000/blogs/2018/11/27/podman-exists.html" />
<meta property="og:site_name" content="podman.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-27T00:00:00-06:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"baude"},"description":"Podman container|image exists By Brent Baude GitHub Twitter We are seeing a proliferation of Podman usage in users’ daily workflows. As such, these workflows are often scripted – in something like bash – and clear exit codes from the applications being run are paramount. One of the tasks we often see is a user wanting to verify if an image or a container exists in local storage. We saw several different approaches approaches to solving this including running podman ps or podman images with filters or complex uses of grep.","@type":"BlogPosting","url":"http://0.0.0.0:4000/blogs/2018/11/27/podman-exists.html","headline":"Podman container image exists","dateModified":"2018-11-27T00:00:00-06:00","datePublished":"2018-11-27T00:00:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/blogs/2018/11/27/podman-exists.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="shortcut icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/assets/css/style.css?v=a5ad4b5b78f492f24c1321a74efdbcc0f20fd4cd">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="">Podman</a></h1>
        <p class="header">Manage pods, containers, and container images.</p>

        <ul>
          <li><a class="buttons" href="/getting-started">Get Started</a>
          <li><a class="buttons" href="/community">Join Community</a>
          <li><a class="buttons" href="/blogs">Blog</a>
          <li><a class="buttons" href="/releases">Releases</a>
          <li><a class="buttons" href="/talks">Talks</a>
          <li><a class="buttons github" href="https://github.com/containers/libpod">View Code</a>
          <li><a class="buttons github" href="https://github.com/jberkus/podman.io">Edit Website</a>
        </ul>

        
          <p class="header">This project is maintained by the <a class="header name" href="https://github.com/jberkus">jberkus</a> organization.</p>

        <p class="header">Subscribe to the <a href="https://podman.io/feed.xml">blog feed</a>.</p>
        

        
      </header>

      <section>
        <p><img src="https://podman.io/images/podman.svg" alt="podman logo" /></p>

<h1 id="podman-containerimage-exists">Podman container|image exists</h1>
<h2 id="by-brent-baude-github-twitter">By Brent Baude <a href="https://github.com/baude">GitHub</a> <a href="https://twitter.com/bbaude">Twitter</a></h2>

<p>We are seeing a proliferation of Podman usage in users’ daily workflows.  As such, these workflows are often scripted – in something like bash – and clear exit codes from the applications being run are paramount.  One of the tasks we often see is a user wanting to verify if an image or a container exists in local storage.  We saw several different approaches approaches to solving this including running <code class="highlighter-rouge">podman ps</code> or <code class="highlighter-rouge">podman images</code> with filters or complex uses of grep.</p>

<!--readmore-->

<h3 id="solution">Solution</h3>

<p>After a bit of discussion with our users, recorded in [issue #1845] (https://github.com/containers/libpod/issues/1845), a plan was hatched to have a specific command that satisfies this use case.  It was implemented for both containers and images; and I suppose if users wish, we could implement it for pods as well. If the image or container exists, Podman will return an exit code of <code class="highlighter-rouge">0</code>. If it does not exist, Podman will return an exit code of <code class="highlighter-rouge">1</code>. Any other exit code can be attributed to non-verification failures like permissions or failure in reading local storage.</p>

<h3 id="check-on-an-images">Check on an images</h3>
<p>To verify the existence of an image in your local storage, you can use the command <code class="highlighter-rouge">podman image exists &lt;IMAGE_NAME&gt;</code>. Let’s clarify through the use of an example.</p>

<p>The images we have in our local storage are as follows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman images
REPOSITORY                   TAG      IMAGE ID       CREATED        SIZE
docker.io/library/alpine     latest   196d12cf6ab1   2 months ago   4.67 MB
</code></pre></div></div>
<p>If we wanted to verify the existence of the image <code class="highlighter-rouge">docker.io/library/alpine:latest</code>, we would:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman image exists docker.io/library/alpine:latest
$ echo $?
0
</code></pre></div></div>
<p>You can also verify by short-name if preferable:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman image exists alpine
$ echo $?
0
</code></pre></div></div>

<p>You can also verify an image by an image’s full or shortened ID.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman image exists 196d12cf6ab1
$ echo $?
0
</code></pre></div></div>

<p>And finally, a failure to verify example would look like:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman image exists busybox
$ echo $?
1
</code></pre></div></div>
<h3 id="check-on-a-container">Check on a container</h3>
<p>We can verify the existence of a container in much the same way as an image.  The grammar differs slightly.</p>

<p>My system has the following container:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman ps --format " "
472fde2f48c7 foobar
</code></pre></div></div>

<p>And I can verify the existence of the container with <code class="highlighter-rouge">podman container exists &lt;CONTAINER_NAME&gt;</code>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo podman container exists foobar
$ echo $?
0
</code></pre></div></div>
<p>Like images, you can also verify a container using its full or partial container ID.</p>

      </section>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
